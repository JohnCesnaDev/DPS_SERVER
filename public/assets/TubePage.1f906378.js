import{Q as k,a as T}from"./QToolbar.dad4a12f.js";import{Q as A}from"./QCheckbox.b358db89.js";import{k as Y,l as G,Q as f}from"./QBtn.63af1d86.js";import{Q as m}from"./QCard.8a7d6a0a.js";import{Q as D,c as B}from"./QTable.7ed7608c.js";import{c as U,h as x}from"./render.188e8231.js";import{j as z,k as Q,l as J,r as i,o as X,c as Z,w as t,i as n,e,h as p,O as ee,x as w}from"./index.bf4f2ade.js";import{Q as le}from"./QPage.ffa0e5f9.js";import{C as V}from"./ClosePopup.3da6e2f8.js";import"./use-dark.f3adcad0.js";import"./use-form.0282eb88.js";import"./QItem.1be2ff41.js";import"./selection.e3d44e10.js";import"./format.3e32b8d9.js";var te=U({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(u,{slots:r}){const s=J(),d=z(()=>"q-td"+(u.autoWidth===!0?" q-table--col-auto-width":"")+(u.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(u.props===void 0)return Q("td",{class:d.value},x(r.default));const h=s.vnode.key,v=(u.props.colsMap!==void 0?u.props.colsMap[h]:null)||u.props.col;if(v===void 0)return;const{row:b}=u.props;return Q("td",{class:d.value+v.__tdClass(b),style:v.__tdStyle(b)},x(r.default))}}}),ae=U({name:"QTr",props:{props:Object,noHover:Boolean},setup(u,{slots:r}){const s=z(()=>"q-tr"+(u.props===void 0||u.props.header===!0?"":" "+u.props.__trClass)+(u.noHover===!0?" q-tr--no-hover":""));return()=>Q("tr",{class:s.value},x(r.default))}}),g=U({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(u,{slots:r}){const s=z(()=>`q-card__section q-card__section--${u.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>Q(u.tag,{class:s.value},x(r.default))}}),I=U({name:"QCardActions",props:{...Y,vertical:Boolean},setup(u,{slots:r}){const s=G(u),d=z(()=>`q-card__actions ${s.value} q-card__actions--${u.vertical===!0?"vert column":"horiz row"}`);return()=>Q("div",{class:d.value},x(r.default))}});const oe={class:"row items-start q-gutter-md"},ue=p(" Dimension "),re={style:{margin:"15px"}},se={class:"col column q-gutter-md"},ne=p(" Liste "),ie={style:{margin:"15px"}},de={class:"col"},ce=p(" Resultat "),fe={style:{margin:"15px"}},me=p(" Param\xE8tres "),pe={style:{margin:"15px"}},ve={class:"col column q-gutter-md"},_e=n("div",{class:"text-h6"},"Alert",-1),ge=p(" Veuillez entr\xE9e une longueur. "),be=n("div",{class:"text-h6"},"Alert",-1),he=p(" Veuillez entr\xE9e une longueur inferieur a la dimention des barres ou modifier la taille des barres. "),ye=n("div",{class:"text-h6"},"Alert",-1),qe=p(" Veuillez entr\xE9e une quantiter. "),we=n("span",{class:"q-ml-sm"},"La longueur existe d\xE9j\xE0, voulez-vous ajouter la quantit\xE9?",-1),Oe={setup(u){const r=i(0),s=i(0),d=i(6e3),h=i(2),v=i(0),b=i(!1),E=i(!1),H=i(!1),N=i(!1),L=[{name:"longueur",required:!0,align:"left",label:"Longueur",field:o=>o.longueur},{name:"quantite",required:!0,align:"left",label:"Quantit\xE9",field:"quantite"}],S=[{name:"barre",required:!0,align:"left",label:"Barres",field:o=>o.barres},{name:"debit",required:!0,align:"left",label:"Debit",field:"debit"},{name:"chute",required:!0,align:"left",label:"Chute",field:"chute"}],c=i([]),y=i([]),O=i([]);function j(){r.value==0||r.value==""?b.value=!0:r.value>=Number(d.value)?E.value=!0:s.value==0||s.value==""?H.value=!0:c.value.find(o=>o.longueur==r.value)===void 0?c.value.push({longueur:parseInt(r.value),quantite:parseInt(s.value)}):N.value=!0,c.value.sort((o,l)=>l.longueur-o.longueur),P()}function M(){c.value.forEach(o=>{o.longueur==parseInt(r.value)&&(o.quantite=o.quantite+parseInt(s.value))}),c.value.sort((o,l)=>l.longueur-o.longueur),P()}function P(){if(c.value.length!=0){let o=[{barres:0,debit:[],debitstring:"",chute:Number(d.value)}];c.value.sort((l,a)=>a.longueur-l.longueur),c.value.forEach(l=>{for(let a=0;a<l.quantite;a++){let _=l.longueur+h.value,q=o.findIndex(C=>_<C.chute);if(q!=-1){const C=o[q].debit.find(R=>R.longueur==l.longueur);C===void 0?o[q].debit.push({longueur:l.longueur,quantite:1}):C.quantite++,o[q].chute=o[q].chute-_}else o.push({barres:0,debit:[{longueur:l.longueur,quantite:1}],debitstring:"",chute:Number(d.value)-_})}}),o.forEach(l=>{l.debit.forEach(a=>{l.debitstring+="( "+a.quantite+"x"+a.longueur+" ) "})}),y.value=[],v.value=0,o.forEach(l=>{v.value++;let a=y.value.find(_=>_.debit==l.debitstring);a===void 0?y.value.push({barres:1,debit:l.debitstring,chute:l.chute}):a.barres++})}}function $(){c.value=[],y=[]}function K(){const o=document.getElementById("printMe").innerHTML;let l="";for(const _ of[...document.querySelectorAll('link[rel="stylesheet"], style')])l+=_.outerHTML;const a=window.open("","","left=0,top=0,width=800,height=900,toolbar=0,scrollbars=0,status=0");return a.document.write(`<!DOCTYPE html>
<html>
  <head>
    ${l}
  </head>
  <body>
    ${o}
  </body>
</html>`),a.document.close(),a.focus(),!0}function W(){r.value=""}function F(){s.value=""}return(o,l)=>(X(),Z(le,{class:"flex flex-center"},{default:t(()=>[n("div",oe,[e(m,{class:"shadow-10 q-card--bordered",style:{height:"800px"}},{default:t(()=>[e(k,null,{default:t(()=>[e(T,null,{default:t(()=>[ue]),_:1})]),_:1}),n("div",re,[n("div",se,[e(A,{outlined:"",type:"number",label:"longueur","stack-label":"",modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=a=>r.value=a),onFocus:W},null,8,["modelValue"]),e(A,{outlined:"",type:"number",label:"nombre","stack-label":"",modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=a=>s.value=a),onFocus:F},null,8,["modelValue"]),e(f,{onClick:j,color:"primary",label:"Ajouter"}),e(f,{onClick:K,color:"primary",label:"Imprimer"}),e(f,{onClick:$,color:"primary",label:"Tous suprimer"})])])]),_:1}),n("div",null,[e(m,{class:"shadow-10 q-card--bordered",style:{height:"800px",width:"300px"}},{default:t(()=>[e(k,null,{default:t(()=>[e(T,null,{default:t(()=>[ne]),_:1})]),_:1}),n("div",ie,[e(D,{class:"my-sticky-header-table",style:{height:"715px"},flat:"",bordered:"",selection:"single",rows:c.value,columns:L,"row-key":"longueur",separator:"cell","rows-per-page-options":[0],"virtual-scroll":"",selected:O.value,"onUpdate:selected":l[2]||(l[2]=a=>O.value=a)},null,8,["rows","selected"])])]),_:1})]),n("div",de,[e(m,{id:"printMe",class:"shadow-10 q-card--bordered",style:{height:"800px","min-width":"400px"}},{default:t(()=>[e(k,null,{default:t(()=>[e(T,null,{default:t(()=>[ce]),_:1})]),_:1}),n("div",fe,[e(D,{class:"my-sticky-header-table",style:{height:"715px"},flat:"",bordered:"",rows:y.value,columns:S,"row-key":"barre",separator:"cell","rows-per-page-options":[0],"virtual-scroll":""},{"bottom-row":t(()=>[e(ae,null,{default:t(()=>[e(te,{colspan:"100%"},{default:t(()=>[p(" Total: "+ee(v.value),1)]),_:1})]),_:1})]),_:1},8,["rows"])])]),_:1})]),e(m,{class:"shadow-10 q-card--bordered",style:{height:"800px"}},{default:t(()=>[e(k,null,{default:t(()=>[e(T,null,{default:t(()=>[me]),_:1})]),_:1}),n("div",pe,[n("div",ve,[e(A,{outlined:"",type:"number",label:"Longueur des barres","stack-label":"",modelValue:d.value,"onUpdate:modelValue":l[3]||(l[3]=a=>d.value=a)},null,8,["modelValue"]),e(A,{outlined:"",type:"number",label:"epaisseur de la coupe","stack-label":"",modelValue:h.value,"onUpdate:modelValue":l[4]||(l[4]=a=>h.value=a)},null,8,["modelValue"])])])]),_:1})]),e(B,{modelValue:b.value,"onUpdate:modelValue":l[5]||(l[5]=a=>b.value=a)},{default:t(()=>[e(m,null,{default:t(()=>[e(g,null,{default:t(()=>[_e]),_:1}),e(g,{class:"q-pt-none"},{default:t(()=>[ge]),_:1}),e(I,{align:"right"},{default:t(()=>[w(e(f,{flat:"",label:"OK",color:"primary"},null,512),[[V]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(B,{modelValue:E.value,"onUpdate:modelValue":l[6]||(l[6]=a=>E.value=a)},{default:t(()=>[e(m,null,{default:t(()=>[e(g,null,{default:t(()=>[be]),_:1}),e(g,{class:"q-pt-none"},{default:t(()=>[he]),_:1}),e(I,{align:"right"},{default:t(()=>[w(e(f,{flat:"",label:"OK",color:"primary"},null,512),[[V]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(B,{modelValue:H.value,"onUpdate:modelValue":l[7]||(l[7]=a=>H.value=a)},{default:t(()=>[e(m,null,{default:t(()=>[e(g,null,{default:t(()=>[ye]),_:1}),e(g,{class:"q-pt-none"},{default:t(()=>[qe]),_:1}),e(I,{align:"right"},{default:t(()=>[w(e(f,{flat:"",label:"OK",color:"primary"},null,512),[[V]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(B,{modelValue:N.value,"onUpdate:modelValue":l[8]||(l[8]=a=>N.value=a),persistent:""},{default:t(()=>[e(m,null,{default:t(()=>[e(g,{class:"row items-center"},{default:t(()=>[we]),_:1}),e(I,{align:"right"},{default:t(()=>[w(e(f,{flat:"",label:"Oui",onClick:M,color:"primary"},null,512),[[V]]),w(e(f,{flat:"",label:"Non",color:"primary"},null,512),[[V]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Oe as default};
